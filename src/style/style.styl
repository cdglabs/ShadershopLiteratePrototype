// ============================================================================
// Config
// ============================================================================

highlightColor = #09c
plotBackgroundColor = #FAF8F2
variableColor = #CDFFBD

PlusButtonSize = 14px

wordSpacingSize = 5px
mainSpacingSize = 10px
largeSpacingSize = 50px




paramColor = #ffe
lineOutputColor = #eef


inline(va)
  display inline-block
  vertical-align va


// ============================================================================
// Generic
// ============================================================================

html, body
  // overflow hidden
  font-family "Lucida Sans Unicode", "Lucida Grande", sans-serif
  font-size 12px
  // line-height 14px
  color #444
  margin 0

[contenteditable]:active, [contenteditable]:focus, button:active, button:focus
  outline none

canvas
  position absolute
  top 0
  left 0
  width 100%
  height 100%

#AppRoot
  margin largeSpacingSize
  white-space nowrap

// ============================================================================
// Dragging
// ============================================================================

.draggingObject
  position: fixed
  z-index: 100;
  pointer-events: none;
.draggingObject
  border-radius 4px
  box-shadow: 0px 2px 6px rgba(0,0,0,0.5);

.draggingOverlay
  position: fixed
  top: 0; left: 0; bottom: 0; right: 0;
  z-index: 200





.CustomFn
  margin-bottom largeSpacingSize



.MainPlot
  position relative
  inline(top)
  width mainSpacingSize * 40
  height mainSpacingSize * 40
  margin-right mainSpacingSize
  background-color plotBackgroundColor

.CustomFnDefinition
  inline(top)

.RootExpr
  inline(top)
  margin-right mainSpacingSize
  &:hover
    background-color tint(highlightColor, 97%)
  .RootExprExtras
    position relative
    > .TranscludeLinkIndicator
      left 21px
    .ExtrasLine
      text-align right
      margin-right wordSpacingSize
      margin-bottom wordSpacingSize
      font-size 10px
      .ExtrasButton
        cursor pointer
      .ExtrasButton:hover
        color highlightColor

.RootExprExtras
  opacity 0
.RootExpr:hover .RootExprExtras
  opacity 1



.ExprNode
  position relative
  margin-bottom -1px
  padding-right wordSpacingSize
  min-width 174px
  &:hover
    background-color tint(highlightColor, 90%)

.ExprNodePlaceholder
  height 46px
  margin-top 1px
  background-color #bbb
  box-shadow inset 0px 1px 3px rgba(0,0,0,0.5)


.ExprThumbnail
  position relative
  inline(middle)
  border 1px solid #eee
  background-color plotBackgroundColor
  box-sizing border-box
  width 5 * mainSpacingSize
  height 5 * mainSpacingSize
  overflow hidden

.ExprValue
  position relative
  inline(top)
  background-color rgba(255,255,255,0.9)
  font-size 0.8em
  line-height 1.5em
  // background-color blue
  // height 1em
  // line-height 1em
  // padding 0.5 * wordSpacingSize
  border-bottom-right-radius 4px



.ExprInternals
  inline(middle)

.Param
  inline(middle)
  margin-left wordSpacingSize
  .ExprThumbnail
    width 3 * mainSpacingSize
    height 3 * mainSpacingSize

.ParamPlaceholder
  inline(middle)
  margin-left wordSpacingSize
  width 30px
  height 1em
  padding 2px 4px
  border-radius 4px
  border 1px dashed #ccc


.Variable
  background-color #fff
  border-radius 4px
  &.Hovered
    background-color variableColor

.VariableLabel, .VariableValue
  inline(middle)
  padding 2px 4px

.VariableLabel
  background-color rgba(0, 0, 0, 0.2)
  border-radius 4px 0px 0px 4px

.VariableValue
  background-color rgba(0, 0, 0, 0.1)
  border-radius 0px 4px 4px 0px
  min-width 30px



.FnLabel
  inline(middle)
  margin-left wordSpacingSize
  min-width 11px // so +, -, *, and / line up


.ApplicationLabel
  inline(middle)
  margin-left wordSpacingSize
  font-style italic

.ApplicationLabel:empty
  width 60px



.ActiveTransclusionDrop
  .Variable, .ExprThumbnail, .ParamPlaceholder
    box-shadow 0px 0px 16px 0px rgba(highlightColor, 0.5)











.CustomFnHeader
  padding-bottom mainSpacingSize
  margin-bottom mainSpacingSize
  border-bottom 1px solid #eee
  .FnLabel
    font-weight bold
    margin-left 0px





.ApplicationAutoComplete
  position absolute
  z-index 20
  cursor default
  left 0
  top 100%
  padding wordSpacingSize
  margin -1*wordSpacingSize
  background-color #fff
  border-radius wordSpacingSize
  box-shadow 0px 6px 24px rgba(0,0,0,0.25)
  .Scroller
    width 216px
    height 270px
    overflow-x hidden
    overflow-y auto

  .ApplicationAutoCompleteRow
    cursor pointer
    &:hover
      background-color tint(highlightColor, 90%)
    > *
      pointer-events none






.CreateExprButton, .CreateRootExprButton, .CreateCustomFn
  width PlusButtonSize
  height PlusButtonSize
  padding 0
  line-height PlusButtonSize
  font-size 9px
  color #777
  font-family verdana
  font-weight bold
  text-shadow 0 1px 0 rgba(255,255,255,0.5)
  background-color #ddd
  background-image linear-gradient(to bottom, #eee, #ccc)
  box-shadow 0 2px 1px rgba(0,0,0,0.16), 0 0 1px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.55)
  border-radius 20px
  border 0px
  &:before
    content "+"
  &:hover
    background-image linear-gradient(to bottom, #f3f3f3, #d3d3d3)
  &:active
    background-image linear-gradient(to bottom, #cacaca, #d5d5d5)
    box-shadow 0 1px 1px rgba(255,255,255,0.35), inset 0 0 1px rgba(0,0,0,0.5), inset 0 1px 4px rgba(0,0,0,0.4)


.CreateExprButton
  position absolute
  z-index 10
  left 50%
  margin-left -0.5 * PlusButtonSize
  bottom -0.5 * PlusButtonSize
.CreateExprButton
  opacity 0
.ExprNode:hover .CreateExprButton
  opacity 1


.CreateRootExprButton
  opacity 0
.CustomFnDefinition:hover .CreateRootExprButton
  opacity 1

